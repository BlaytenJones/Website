<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
        <title>Completed Projects</title>
        <link href="/projects.css" rel="stylesheet" type="text/css" media="all">
        <link rel="icon" type="image/x-icon" href="ico.png">
    </head>
    <body>
        <h1>My Repositories</h1>
        <ul id="repo-list"></ul>
        <script>
            // Define the function to fetch repositories
            async function fetchRepositories(username) {
                try {
                    // Load Octokit.js dynamically
                    const script = document.createElement('script');
                    script.src = "https://cdn.jsdelivr.net/npm/@octokit/core@latest/dist/index.js";
                    document.body.appendChild(script);
    
                    // Wait for the script to load
                    await new Promise((resolve, reject) => {
                        script.onload = resolve;
                        script.onerror = reject;
                    });
    
                    // Octokit is now available
                    const octokit = new Octokit();
    
                    // Fetch repositories
                    const response = await octokit.request('GET /users/{username}/repos', {
                        username: username
                    });
    
                    const repos = response.data;
                    const repoList = document.getElementById('repo-list');
    
                    repos.forEach(repo => {
                        const li = document.createElement('li');
                        li.textContent = repo.full_name;
                        repoList.appendChild(li);
                    });
                } catch (error) {
                    console.error('Error fetching repositories:', error);
                }
            }
    
            // Call the function with your GitHub username
            fetchRepositories('BlaytenJones');
        </script>
    </body>
    </html>